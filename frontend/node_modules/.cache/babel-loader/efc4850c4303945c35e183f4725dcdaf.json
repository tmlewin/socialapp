{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tech Guru\\\\Desktop\\\\Javascript\\\\social\\\\frontend\\\\src\\\\components\\\\CreatePost.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport { useDropzone } from 'react-dropzone';\nimport Compressor from 'compressorjs';\nimport axios from '../axios';\nimport './css/CreatePost.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAX_FILE_SIZE = 4 * 1024 * 1024; // 4MB\n\nconst CreatePost = ({\n  threadId,\n  onPostCreated\n}) => {\n  _s();\n\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [images, setImages] = useState([]);\n  const [mentionSuggestions, setMentionSuggestions] = useState([]);\n  const [mentionQuery, setMentionQuery] = useState('');\n\n  const compressImage = file => {\n    return new Promise((resolve, reject) => {\n      new Compressor(file, {\n        quality: 0.6,\n        maxWidth: 1000,\n        maxHeight: 1000,\n\n        success(result) {\n          resolve(result);\n        },\n\n        error(err) {\n          reject(err);\n        }\n\n      });\n    });\n  };\n\n  const onDrop = useCallback(async acceptedFiles => {\n    const compressedFiles = await Promise.all(acceptedFiles.map(async file => {\n      if (file.size > MAX_FILE_SIZE) {\n        return compressImage(file);\n      }\n\n      return file;\n    }));\n    setImages(prevImages => [...prevImages, ...compressedFiles]);\n  }, []);\n  const {\n    getRootProps,\n    getInputProps,\n    isDragActive\n  } = useDropzone({\n    onDrop,\n    accept: 'image/*',\n    maxSize: MAX_FILE_SIZE\n  });\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append('threadId', threadId);\n    formData.append('title', title);\n    formData.append('content', content);\n    images.forEach(image => {\n      formData.append('images', image);\n    });\n\n    try {\n      const response = await axios.post('/api/posts', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      onPostCreated(response.data);\n      setTitle('');\n      setContent('');\n      setImages([]); // Clear the images array\n    } catch (error) {\n      var _error$response;\n\n      console.error('Error creating post:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n    }\n  };\n\n  const handleContentChange = value => {\n    setContent(value);\n    const lastWord = value.split(' ').pop();\n\n    if (lastWord.startsWith('@') && lastWord.length > 1) {\n      setMentionQuery(lastWord.slice(1));\n      fetchMentionSuggestions(lastWord.slice(1));\n    } else {\n      setMentionSuggestions([]);\n    }\n  };\n\n  const fetchMentionSuggestions = async query => {\n    try {\n      const response = await axios.get(`/api/users/search?q=${query}`);\n      setMentionSuggestions(response.data);\n    } catch (error) {\n      console.error('Error fetching mention suggestions:', error);\n    }\n  };\n\n  const handleMentionSelect = username => {\n    const words = content.split(' ');\n    words[words.length - 1] = `@${username} `;\n    setContent(words.join(' '));\n    setMentionSuggestions([]);\n  };\n\n  const modules = useMemo(() => ({\n    toolbar: [[{\n      header: [1, 2, false]\n    }], ['bold', 'italic', 'underline', 'strike', 'blockquote'], [{\n      list: 'ordered'\n    }, {\n      list: 'bullet'\n    }], ['link', 'image'], ['clean']],\n    clipboard: {\n      matchVisual: false\n    }\n  }), []);\n  const formats = ['header', 'bold', 'italic', 'underline', 'strike', 'blockquote', 'list', 'bullet', 'link', 'image'];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"create-post\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Add a New Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Post Title\",\n        value: title,\n        onChange: e => setTitle(e.target.value),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ReactQuill, {\n        theme: \"snow\",\n        value: content,\n        onChange: handleContentChange,\n        modules: modules,\n        formats: formats\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this), mentionSuggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mention-suggestions\",\n        children: mentionSuggestions.map(user => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mention-suggestion\",\n          onClick: () => handleMentionSelect(user.username),\n          children: user.username\n        }, user._id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", { ...getRootProps(),\n        className: `dropzone ${isDragActive ? 'active' : ''}`,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", { ...getInputProps()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 21\n        }, this), isDragActive ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Drop the images here ...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Drag 'n' drop some images here, or click to select images\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 17\n      }, this), images.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-preview\",\n        children: images.map((image, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n          src: URL.createObjectURL(image),\n          alt: `Preview ${index + 1}`,\n          className: \"thumbnail\"\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 29\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 9\n  }, this);\n};\n\n_s(CreatePost, \"XdETuSjOggxA2TSOmDPBj2bZIsk=\", false, function () {\n  return [useDropzone];\n});\n\n_c = CreatePost;\nexport default CreatePost;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreatePost\");","map":{"version":3,"sources":["C:/Users/Tech Guru/Desktop/Javascript/social/frontend/src/components/CreatePost.jsx"],"names":["React","useState","useCallback","useMemo","useEffect","ReactQuill","useDropzone","Compressor","axios","MAX_FILE_SIZE","CreatePost","threadId","onPostCreated","title","setTitle","content","setContent","images","setImages","mentionSuggestions","setMentionSuggestions","mentionQuery","setMentionQuery","compressImage","file","Promise","resolve","reject","quality","maxWidth","maxHeight","success","result","error","err","onDrop","acceptedFiles","compressedFiles","all","map","size","prevImages","getRootProps","getInputProps","isDragActive","accept","maxSize","handleSubmit","e","preventDefault","formData","FormData","append","forEach","image","response","post","headers","data","console","message","handleContentChange","value","lastWord","split","pop","startsWith","length","slice","fetchMentionSuggestions","query","get","handleMentionSelect","username","words","join","modules","toolbar","header","list","clipboard","matchVisual","formats","target","user","_id","index","URL","createObjectURL"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useMemo, useEffect } from 'react';\nimport ReactQuill from 'react-quill';\nimport 'react-quill/dist/quill.snow.css';\nimport { useDropzone } from 'react-dropzone';\nimport Compressor from 'compressorjs';\nimport axios from '../axios';\nimport './css/CreatePost.css';\n\nconst MAX_FILE_SIZE = 4 * 1024 * 1024; // 4MB\n\nconst CreatePost = ({ threadId, onPostCreated }) => {\n    const [title, setTitle] = useState('');\n    const [content, setContent] = useState('');\n    const [images, setImages] = useState([]);\n    const [mentionSuggestions, setMentionSuggestions] = useState([]);\n    const [mentionQuery, setMentionQuery] = useState('');\n\n    const compressImage = (file) => {\n        return new Promise((resolve, reject) => {\n            new Compressor(file, {\n                quality: 0.6,\n                maxWidth: 1000,\n                maxHeight: 1000,\n                success(result) {\n                    resolve(result);\n                },\n                error(err) {\n                    reject(err);\n                },\n            });\n        });\n    };\n\n    const onDrop = useCallback(async (acceptedFiles) => {\n        const compressedFiles = await Promise.all(\n            acceptedFiles.map(async (file) => {\n                if (file.size > MAX_FILE_SIZE) {\n                    return compressImage(file);\n                }\n                return file;\n            })\n        );\n\n        setImages((prevImages) => [...prevImages, ...compressedFiles]);\n    }, []);\n\n    const { getRootProps, getInputProps, isDragActive } = useDropzone({\n        onDrop,\n        accept: 'image/*',\n        maxSize: MAX_FILE_SIZE,\n    });\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('threadId', threadId);\n        formData.append('title', title);\n        formData.append('content', content);\n        images.forEach((image) => {\n            formData.append('images', image);\n        });\n\n        try {\n            const response = await axios.post('/api/posts', formData, {\n                headers: { 'Content-Type': 'multipart/form-data' },\n            });\n            onPostCreated(response.data);\n            setTitle('');\n            setContent('');\n            setImages([]); // Clear the images array\n        } catch (error) {\n            console.error('Error creating post:', error.response?.data || error.message);\n        }\n    };\n\n    const handleContentChange = (value) => {\n        setContent(value);\n        const lastWord = value.split(' ').pop();\n        if (lastWord.startsWith('@') && lastWord.length > 1) {\n            setMentionQuery(lastWord.slice(1));\n            fetchMentionSuggestions(lastWord.slice(1));\n        } else {\n            setMentionSuggestions([]);\n        }\n    };\n\n    const fetchMentionSuggestions = async (query) => {\n        try {\n            const response = await axios.get(`/api/users/search?q=${query}`);\n            setMentionSuggestions(response.data);\n        } catch (error) {\n            console.error('Error fetching mention suggestions:', error);\n        }\n    };\n\n    const handleMentionSelect = (username) => {\n        const words = content.split(' ');\n        words[words.length - 1] = `@${username} `;\n        setContent(words.join(' '));\n        setMentionSuggestions([]);\n    };\n\n    const modules = useMemo(() => ({\n        toolbar: [\n            [{ header: [1, 2, false] }],\n            ['bold', 'italic', 'underline', 'strike', 'blockquote'],\n            [{ list: 'ordered' }, { list: 'bullet' }],\n            ['link', 'image'],\n            ['clean'],\n        ],\n        clipboard: {\n            matchVisual: false,\n        },\n    }), []);\n\n    const formats = [\n        'header',\n        'bold', 'italic', 'underline', 'strike', 'blockquote',\n        'list', 'bullet',\n        'link', 'image'\n    ];\n\n    return (\n        <div className=\"create-post\">\n            <h3>Add a New Post</h3>\n            <form onSubmit={handleSubmit}>\n                <input\n                    type=\"text\"\n                    placeholder=\"Post Title\"\n                    value={title}\n                    onChange={(e) => setTitle(e.target.value)}\n                    required\n                />\n                <ReactQuill\n                    theme=\"snow\"\n                    value={content}\n                    onChange={handleContentChange}\n                    modules={modules}\n                    formats={formats}\n                />\n                {mentionSuggestions.length > 0 && (\n                    <div className=\"mention-suggestions\">\n                        {mentionSuggestions.map((user) => (\n                            <div\n                                key={user._id}\n                                className=\"mention-suggestion\"\n                                onClick={() => handleMentionSelect(user.username)}\n                            >\n                                {user.username}\n                            </div>\n                        ))}\n                    </div>\n                )}\n                <div {...getRootProps()} className={`dropzone ${isDragActive ? 'active' : ''}`}>\n                    <input {...getInputProps()} />\n                    {isDragActive ? (\n                        <p>Drop the images here ...</p>\n                    ) : (\n                        <p>Drag 'n' drop some images here, or click to select images</p>\n                    )}\n                </div>\n                {images.length > 0 && (\n                    <div className=\"image-preview\">\n                        {images.map((image, index) => (\n                            <img\n                                key={index}\n                                src={URL.createObjectURL(image)}\n                                alt={`Preview ${index + 1}`}\n                                className=\"thumbnail\"\n                            />\n                        ))}\n                    </div>\n                )}\n                <button type=\"submit\">Submit Post</button>\n            </form>\n        </div>\n    );\n};\n\nexport default CreatePost;\n"]},"metadata":{},"sourceType":"module"}