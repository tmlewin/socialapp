{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tech Guru\\\\Desktop\\\\Javascript\\\\social\\\\frontend\\\\src\\\\components\\\\AuthForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport axios from '../axios';\nimport { Eye } from 'lucide-react';\nimport './css/AuthForm.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst AuthForm = ({\n  onAuth\n}) => {\n  _s();\n\n  const [isLogin, setIsLogin] = useState(true);\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [email, setEmail] = useState('');\n  const [displayName, setDisplayName] = useState('');\n  const [fullName, setFullName] = useState('');\n  const [dateOfBirth, setDateOfBirth] = useState('');\n  const [location, setLocation] = useState('');\n  const [bio, setBio] = useState('');\n  const [website, setWebsite] = useState('');\n  const history = useHistory();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError('');\n\n    try {\n      if (!isLogin && password !== confirmPassword) {\n        setError(\"Passwords don't match\");\n        return;\n      }\n\n      const endpoint = isLogin ? '/api/auth/login' : '/api/auth/register';\n      const userData = isLogin ? {\n        username,\n        password\n      } : {\n        username,\n        email,\n        password,\n        displayName: displayName || username,\n        // Provide a default if not set\n        fullName: fullName || '',\n        dateOfBirth: dateOfBirth || null,\n        location: location || '',\n        bio: bio || '',\n        website: website || ''\n      };\n      console.log('Sending user data:', userData); // Log the data being sent\n\n      const response = await axios.post(endpoint, userData);\n      console.log('Response:', response.data);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n      localStorage.setItem('token', response.data.token);\n      onAuth(response.data.user);\n      history.push('/'); // Redirect to home page\n    } catch (err) {\n      var _err$response, _err$response2, _err$response2$data;\n\n      console.error('Auth error:', ((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || err.message);\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'An error occurred');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"auth-form-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"auth-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Welcome back\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Enter your credentials to access your account\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-toggle\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: isLogin ? 'active' : '',\n          onClick: () => setIsLogin(true),\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: !isLogin ? 'active' : '',\n          onClick: () => setIsLogin(false),\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"username\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"username\",\n            placeholder: \"Enter your username\",\n            value: username,\n            onChange: e => setUsername(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"password-input\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: showPassword ? \"text\" : \"password\",\n              id: \"password\",\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Eye, {\n              className: \"password-toggle\",\n              onClick: () => setShowPassword(!showPassword)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), !isLogin && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"confirmPassword\",\n              children: \"Confirm Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              id: \"confirmPassword\",\n              value: confirmPassword,\n              onChange: e => setConfirmPassword(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              id: \"email\",\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"displayName\",\n              children: \"Display Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"displayName\",\n              value: displayName,\n              onChange: e => setDisplayName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 128,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"fullName\",\n              children: \"Full Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"fullName\",\n              value: fullName,\n              onChange: e => setFullName(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"dateOfBirth\",\n              children: \"Date of Birth\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              id: \"dateOfBirth\",\n              value: dateOfBirth,\n              onChange: e => setDateOfBirth(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"location\",\n              children: \"Location\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              id: \"location\",\n              value: location,\n              onChange: e => setLocation(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"bio\",\n              children: \"Bio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              id: \"bio\",\n              value: bio,\n              onChange: e => setBio(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"website\",\n              children: \"Website\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"url\",\n              id: \"website\",\n              value: website,\n              onChange: e => setWebsite(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-btn\",\n          children: isLogin ? 'Sign In' : 'Create Account'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"terms\",\n        children: \"Protected by reCAPTCHA and subject to the Privacy Policy and Terms of Service\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthForm, \"34vJX6rJMD/5gvaz92C2CesuYRQ=\", false, function () {\n  return [useHistory];\n});\n\n_c = AuthForm;\nexport default AuthForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"sources":["C:/Users/Tech Guru/Desktop/Javascript/social/frontend/src/components/AuthForm.jsx"],"names":["React","useState","useHistory","axios","Eye","AuthForm","onAuth","isLogin","setIsLogin","username","setUsername","password","setPassword","confirmPassword","setConfirmPassword","error","setError","showPassword","setShowPassword","email","setEmail","displayName","setDisplayName","fullName","setFullName","dateOfBirth","setDateOfBirth","location","setLocation","bio","setBio","website","setWebsite","history","handleSubmit","e","preventDefault","endpoint","userData","console","log","response","post","data","localStorage","setItem","JSON","stringify","user","token","push","err","message","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport axios from '../axios';\r\nimport { Eye } from 'lucide-react';\r\nimport './css/AuthForm.css';\r\n\r\n\r\nconst AuthForm = ({ onAuth }) => {\r\n    const [isLogin, setIsLogin] = useState(true);\r\n    const [username, setUsername] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [email, setEmail] = useState('');\r\n    const [displayName, setDisplayName] = useState('');\r\n    const [fullName, setFullName] = useState('');\r\n    const [dateOfBirth, setDateOfBirth] = useState('');\r\n    const [location, setLocation] = useState('');\r\n    const [bio, setBio] = useState('');\r\n    const [website, setWebsite] = useState('');\r\n    const history = useHistory();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        try {\r\n            if (!isLogin && password !== confirmPassword) {\r\n                setError(\"Passwords don't match\");\r\n                return;\r\n            }\r\n            const endpoint = isLogin ? '/api/auth/login' : '/api/auth/register';\r\n            const userData = isLogin ? { username, password } : {\r\n                username,\r\n                email,\r\n                password,\r\n                displayName: displayName || username, // Provide a default if not set\r\n                fullName: fullName || '',\r\n                dateOfBirth: dateOfBirth || null,\r\n                location: location || '',\r\n                bio: bio || '',\r\n                website: website || ''\r\n            };\r\n            console.log('Sending user data:', userData); // Log the data being sent\r\n            const response = await axios.post(endpoint, userData);\r\n            console.log('Response:', response.data);\r\n            localStorage.setItem('user', JSON.stringify(response.data.user));\r\n            localStorage.setItem('token', response.data.token);\r\n            onAuth(response.data.user);\r\n            history.push('/'); // Redirect to home page\r\n        } catch (err) {\r\n            console.error('Auth error:', err.response?.data || err.message);\r\n            setError(err.response?.data?.message || 'An error occurred');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"auth-form-container\">\r\n            <div className=\"auth-form\">\r\n                <h1>Welcome back</h1>\r\n                <p>Enter your credentials to access your account</p>\r\n                <div className=\"auth-toggle\">\r\n                    <button \r\n                        className={isLogin ? 'active' : ''} \r\n                        onClick={() => setIsLogin(true)}\r\n                    >\r\n                        Login\r\n                    </button>\r\n                    <button \r\n                        className={!isLogin ? 'active' : ''} \r\n                        onClick={() => setIsLogin(false)}\r\n                    >\r\n                        Register\r\n                    </button>\r\n                </div>\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"username\">Username</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"username\"\r\n                            placeholder=\"Enter your username\"\r\n                            value={username}\r\n                            onChange={(e) => setUsername(e.target.value)}\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"password\">Password</label>\r\n                        <div className=\"password-input\">\r\n                            <input\r\n                                type={showPassword ? \"text\" : \"password\"}\r\n                                id=\"password\"\r\n                                value={password}\r\n                                onChange={(e) => setPassword(e.target.value)}\r\n                                required\r\n                            />\r\n                            <Eye \r\n                                className=\"password-toggle\" \r\n                                onClick={() => setShowPassword(!showPassword)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    {!isLogin && (\r\n                        <>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"confirmPassword\">Confirm Password</label>\r\n                                <input\r\n                                    type=\"password\"\r\n                                    id=\"confirmPassword\"\r\n                                    value={confirmPassword}\r\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"email\">Email</label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    id=\"email\"\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"displayName\">Display Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"displayName\"\r\n                                    value={displayName}\r\n                                    onChange={(e) => setDisplayName(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"fullName\">Full Name</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"fullName\"\r\n                                    value={fullName}\r\n                                    onChange={(e) => setFullName(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"dateOfBirth\">Date of Birth</label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    id=\"dateOfBirth\"\r\n                                    value={dateOfBirth}\r\n                                    onChange={(e) => setDateOfBirth(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"location\">Location</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"location\"\r\n                                    value={location}\r\n                                    onChange={(e) => setLocation(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"bio\">Bio</label>\r\n                                <textarea\r\n                                    id=\"bio\"\r\n                                    value={bio}\r\n                                    onChange={(e) => setBio(e.target.value)}\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label htmlFor=\"website\">Website</label>\r\n                                <input\r\n                                    type=\"url\"\r\n                                    id=\"website\"\r\n                                    value={website}\r\n                                    onChange={(e) => setWebsite(e.target.value)}\r\n                                />\r\n                            </div>\r\n                        </>\r\n                    )}\r\n                    {error && <p className=\"error\">{error}</p>}\r\n                    <button type=\"submit\" className=\"submit-btn\">\r\n                        {isLogin ? 'Sign In' : 'Create Account'}\r\n                    </button>\r\n                </form>\r\n                <p className=\"terms\">\r\n                    Protected by reCAPTCHA and subject to the Privacy Policy and Terms of Service\r\n                </p>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default AuthForm;"]},"metadata":{},"sourceType":"module"}