{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tech Guru\\\\Desktop\\\\Javascript\\\\social\\\\frontend\\\\src\\\\components\\\\Posts.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport axios from '../axios';\nimport { updateContext } from '../context/updateContext';\nimport './css/Posts.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Posts({\n  posts,\n  setPosts\n}) {\n  _s();\n\n  const [updater, setUpdater] = useContext(updateContext);\n  const user = {\n    _id: '123',\n    username: 'tannerkc'\n  };\n  const [input, setInput] = useState('');\n  const [editId, setEditId] = useState(null);\n\n  const handleDelete = async id => {\n    try {\n      await axios.post('/api/posts/delete', {\n        id\n      });\n      setPosts(prevPosts => prevPosts.filter(post => post.postId !== id));\n      setUpdater(state => state + 1);\n    } catch (error) {\n      console.error(\"Error deleting post:\", error);\n    }\n  };\n\n  const handleSend = async id => {\n    const postData = {\n      userId: user._id,\n      content: input\n    };\n\n    try {\n      const response = await axios.put('/api/posts/' + id, postData);\n      setPosts(prevPosts => prevPosts.map(post => post.postId === id ? { ...post,\n        content: input\n      } : post));\n      setInput('');\n      setUpdater(state => state + 1);\n      setEditId(null);\n    } catch (error) {\n      console.error(\"Error updating post:\", error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts__container\",\n    children: posts && posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post__details\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"avatar\",\n          src: \"https://cdn.vox-cdn.com/thumbor/JgCPp2BBxETY596wCp50ccosCfE=/0x0:2370x1574/1200x800/filters:focal(996x598:1374x976)/cdn.vox-cdn.com/uploads/chorus_image/image/68870438/Screen_Shot_2020_07_21_at_9.38.25_AM.0.png\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: post.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 21\n      }, this), post.userId === user._id && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btns\",\n        children: editId !== post._id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setEditId(post._id);\n              setInput(post.content);\n            },\n            className: \"btn-edit\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(post._id),\n            className: \"btn-delete\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"edited message\",\n            value: input,\n            onChange: e => setInput(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSend(post._id),\n            className: \"btn-edit\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setEditId(null),\n            className: \"btn-delete\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 25\n      }, this)]\n    }, post._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Posts, \"AlYoyG2KrQCXhGwzPaJYxXzl72w=\");\n\n_c = Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"sources":["C:/Users/Tech Guru/Desktop/Javascript/social/frontend/src/components/Posts.jsx"],"names":["React","useContext","useState","axios","updateContext","Posts","posts","setPosts","updater","setUpdater","user","_id","username","input","setInput","editId","setEditId","handleDelete","id","post","prevPosts","filter","postId","state","error","console","handleSend","postData","userId","content","response","put","map","e","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from 'react'\nimport axios from '../axios';\nimport { updateContext } from '../context/updateContext';\nimport './css/Posts.css';\n\nexport default function Posts({ posts, setPosts }) {\n\n    const [updater, setUpdater] = useContext(updateContext);\n    const user = { _id: '123', username: 'tannerkc' };\n\n    const [input, setInput] = useState('');\n    const [editId, setEditId] = useState(null);\n\n    const handleDelete = async (id) => {\n        try {\n            await axios.post('/api/posts/delete', { id });\n            setPosts(prevPosts => prevPosts.filter(post => post.postId !== id));\n            setUpdater(state => state + 1);\n        } catch (error) {\n            console.error(\"Error deleting post:\", error);\n        }\n    };\n\n    const handleSend = async (id) => {\n        const postData = {\n            userId: user._id,\n            content: input\n        };\n        \n        try {\n            const response = await axios.put('/api/posts/' + id, postData);\n            setPosts(prevPosts => prevPosts.map(post => \n                post.postId === id ? { ...post, content: input } : post\n            ));\n            setInput('');\n            setUpdater(state => state + 1);\n            setEditId(null);\n        } catch (error) {\n            console.error(\"Error updating post:\", error);\n        }\n    };\n\n    return (\n        <div className=\"posts__container\">\n            {posts && posts.map(post => (\n                <div className=\"post\" key={post._id}>\n                    <div className=\"post__details\">\n                        <img className=\"avatar\" src=\"https://cdn.vox-cdn.com/thumbor/JgCPp2BBxETY596wCp50ccosCfE=/0x0:2370x1574/1200x800/filters:focal(996x598:1374x976)/cdn.vox-cdn.com/uploads/chorus_image/image/68870438/Screen_Shot_2020_07_21_at_9.38.25_AM.0.png\" alt=\"\" />\n                        <div>\n                            <h3>{post.user}</h3>\n                            <p>{post.content}</p>\n                        </div>\n                    </div>\n                    {post.userId === user._id && (\n                        <div className=\"btns\">\n                            {editId !== post._id ? (\n                                <>\n                                    <button \n                                        onClick={() => {\n                                            setEditId(post._id);\n                                            setInput(post.content);\n                                        }} \n                                        className=\"btn-edit\"\n                                    >\n                                        Edit\n                                    </button>\n                                    <button \n                                        onClick={() => handleDelete(post._id)}\n                                        className=\"btn-delete\"\n                                    >\n                                        Delete\n                                    </button>\n                                </>\n                            ) : (\n                                <>\n                                    <input \n                                        type=\"text\" \n                                        placeholder=\"edited message\"\n                                        value={input}\n                                        onChange={(e) => setInput(e.target.value)}\n                                    />\n                                    <button onClick={() => handleSend(post._id)} className=\"btn-edit\">Send</button>\n                                    <button \n                                        onClick={() => setEditId(null)}\n                                        className=\"btn-delete\"\n                                    >\n                                        Cancel\n                                    </button>\n                                </>\n                            )}\n                        </div>\n                    )}\n                </div>\n            ))}\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}