{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tech Guru\\\\Desktop\\\\Javascript\\\\social\\\\frontend\\\\src\\\\components\\\\Posts.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport axios from '../axios';\nimport { updateContext } from '../context/updateContext';\nimport './css/Posts.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Posts() {\n  _s();\n\n  const [updater, setUpdater] = useContext(updateContext);\n  const user = {\n    _id: '123',\n    username: 'tannerkc'\n  };\n  const [posts, setPosts] = useState(null);\n  const [input, setInput] = useState('');\n  const [editId, setEditId] = useState(null);\n\n  const fetchPosts = async () => {\n    let postsData = await axios.get('/api/posts');\n    return postsData;\n  };\n\n  const handleDelete = async id => {\n    console.log(id);\n    await axios.post('/api/posts/delete', {\n      id\n    });\n    setUpdater(state => state + 1);\n  };\n\n  useEffect(() => {\n    console.log(updater);\n    fetchPosts().then(posts => {\n      setPosts(posts.data.reverse());\n    });\n  }, [updater]);\n\n  const handleSend = id => {\n    const postData = {\n      userId: user._id,\n      content: input\n    };\n    axios.put('/api/posts/' + id, postData);\n    setInput('');\n    setUpdater(state => state + 1);\n    window.location.reload();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts__container\",\n    children: posts && posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post__details\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"avatar\",\n          src: \"https://cdn.vox-cdn.com/thumbor/JgCPp2BBxETY596wCp50ccosCfE=/0x0:2370x1574/1200x800/filters:focal(996x598:1374x976)/cdn.vox-cdn.com/uploads/chorus_image/image/68870438/Screen_Shot_2020_07_21_at_9.38.25_AM.0.png\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: post.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 25\n      }, this), post.userId == user._id && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btns\",\n        children: editId !== post.postId ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setEditId(post.postId);\n              setInput(post.content);\n            },\n            className: \"btn-edit\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(post.postId),\n            className: \"btn-delete\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"edited message\",\n            value: input,\n            onChange: e => setInput(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSend(post.postId),\n            className: \"btn-edit\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 38\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setEditId(null),\n            className: \"btn-delete\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 29\n      }, this)]\n    }, post.postId, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 21\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Posts, \"D9KtsF06bwrXKFT+2TNGoVauHYg=\");\n\n_c = Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"sources":["C:/Users/Tech Guru/Desktop/Javascript/social/frontend/src/components/Posts.jsx"],"names":["React","useContext","useEffect","useState","axios","updateContext","Posts","updater","setUpdater","user","_id","username","posts","setPosts","input","setInput","editId","setEditId","fetchPosts","postsData","get","handleDelete","id","console","log","post","state","then","data","reverse","handleSend","postData","userId","content","put","window","location","reload","map","postId","e","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport axios from '../axios';\nimport { updateContext } from '../context/updateContext';\nimport './css/Posts.css'\n\nexport default function Posts() {\n\n    const [updater, setUpdater] = useContext(updateContext)\n    const user = {_id: '123', username: 'tannerkc'}\n\n    const [posts, setPosts] = useState(null)\n\n    const [input, setInput] = useState('')\n    const [editId, setEditId] = useState(null)\n\n    const fetchPosts = async() =>{\n        let postsData = await axios.get('/api/posts')\n        return postsData\n    }\n\n    const handleDelete = async(id) =>{\n        console.log(id)\n        await axios.post('/api/posts/delete',{id})\n        setUpdater(state => state + 1)\n    }\n    \n    useEffect(()=>{\n        console.log(updater)\n        fetchPosts().then((posts)=>{\n            setPosts(posts.data.reverse())\n        })\n    }, [updater])\n\n    const handleSend = (id) =>{\n        const postData = {\n            userId: user._id,\n            content: input\n        }\n        \n        axios.put('/api/posts/'+id, postData)\n        \n        setInput('')\n        setUpdater((state)=>state + 1)\n\n        window.location.reload();\n    }\n\n\n    return (\n        <div className=\"posts__container\">\n            {\n                posts&&\n                posts.map(post=>(\n                    <div className=\"post\" key={post.postId}>\n                        <div className=\"post__details\">\n                            <img className=\"avatar\" src=\"https://cdn.vox-cdn.com/thumbor/JgCPp2BBxETY596wCp50ccosCfE=/0x0:2370x1574/1200x800/filters:focal(996x598:1374x976)/cdn.vox-cdn.com/uploads/chorus_image/image/68870438/Screen_Shot_2020_07_21_at_9.38.25_AM.0.png\" alt=\"\" />\n                            <div>\n                                <h3>{post.user}</h3>\n                                <p>{post.content}</p>\n                            </div>\n                        </div>\n                        {\n                            post.userId == user._id &&\n                            <div className=\"btns\">\n                                {\n                                    editId !== post.postId ?\n                                    <>\n                                        <button \n                                        onClick={()=>{\n                                            setEditId(post.postId)\n                                            setInput(post.content)\n                                        }} className=\"btn-edit\">Edit</button>\n                                        <button \n                                        onClick={()=>handleDelete(post.postId)}\n                                        className=\"btn-delete\">Delete</button>\n                                    </>\n                                    :\n                                    <>\n                                    <input \n                                        type=\"text\" \n                                        placeholder=\"edited message\"\n                                        value={input}\n                                        onChange={(e)=>setInput(e.target.value)}\n                                     />\n                                     <button onClick={()=>handleSend(post.postId)} className=\"btn-edit\">Send</button>\n                                     <button \n                                        onClick={()=>setEditId(null)}\n                                        className=\"btn-delete\">Cancel</button>\n                                     </>\n                                }\n                                \n                            </div>\n                        }\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}