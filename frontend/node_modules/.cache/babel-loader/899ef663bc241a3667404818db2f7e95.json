{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tech Guru\\\\Desktop\\\\Javascript\\\\social\\\\frontend\\\\src\\\\components\\\\Posts.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport axios from '../axios';\nimport { updateContext } from '../context/updateContext';\nimport './css/Posts.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Posts() {\n  _s();\n\n  const [updater, setUpdater] = useContext(updateContext);\n  const user = {\n    _id: '123',\n    username: 'tannerkc'\n  };\n  const [posts, setPosts] = useState(null);\n  const [input, setInput] = useState('');\n  const [editId, setEditId] = useState(null);\n\n  const fetchPosts = async () => {\n    try {\n      const response = await axios.get('/api/posts');\n      setPosts(response.data.reverse());\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n    }\n  };\n\n  const handleDelete = async id => {\n    try {\n      await axios.post('/api/posts/delete', {\n        id\n      });\n      setUpdater(state => state + 1);\n    } catch (error) {\n      console.error(\"Error deleting post:\", error);\n    }\n  };\n\n  useEffect(() => {\n    fetchPosts();\n  }, [updater]);\n\n  const handleSend = async id => {\n    const postData = {\n      userId: user._id,\n      content: input\n    };\n\n    try {\n      await axios.put('/api/posts/' + id, postData);\n      setInput('');\n      setUpdater(state => state + 1);\n      setEditId(null);\n    } catch (error) {\n      console.error(\"Error updating post:\", error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts__container\",\n    children: posts && posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post__details\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"avatar\",\n          src: \"https://cdn.vox-cdn.com/thumbor/JgCPp2BBxETY596wCp50ccosCfE=/0x0:2370x1574/1200x800/filters:focal(996x598:1374x976)/cdn.vox-cdn.com/uploads/chorus_image/image/68870438/Screen_Shot_2020_07_21_at_9.38.25_AM.0.png\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: post.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 25\n      }, this), post.userId == user._id && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"btns\",\n        children: editId !== post.postId ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setEditId(post.postId);\n              setInput(post.content);\n            },\n            className: \"btn-edit\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 41\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(post.postId),\n            className: \"btn-delete\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"edited message\",\n            value: input,\n            onChange: e => setInput(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSend(post.postId),\n            className: \"btn-edit\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 38\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setEditId(null),\n            className: \"btn-delete\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 29\n      }, this)]\n    }, post.postId, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Posts, \"D9KtsF06bwrXKFT+2TNGoVauHYg=\");\n\n_c = Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"sources":["C:/Users/Tech Guru/Desktop/Javascript/social/frontend/src/components/Posts.jsx"],"names":["React","useContext","useEffect","useState","axios","updateContext","Posts","updater","setUpdater","user","_id","username","posts","setPosts","input","setInput","editId","setEditId","fetchPosts","response","get","data","reverse","error","console","handleDelete","id","post","state","handleSend","postData","userId","content","put","map","postId","e","target","value"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react'\nimport axios from '../axios';\nimport { updateContext } from '../context/updateContext';\nimport './css/Posts.css'\n\nexport default function Posts() {\n\n    const [updater, setUpdater] = useContext(updateContext)\n    const user = {_id: '123', username: 'tannerkc'}\n\n    const [posts, setPosts] = useState(null)\n    const [input, setInput] = useState('')\n    const [editId, setEditId] = useState(null)\n\n    const fetchPosts = async() => {\n        try {\n            const response = await axios.get('/api/posts')\n            setPosts(response.data.reverse())\n        } catch (error) {\n            console.error(\"Error fetching posts:\", error)\n        }\n    }\n\n    const handleDelete = async(id) => {\n        try {\n            await axios.post('/api/posts/delete', {id})\n            setUpdater(state => state + 1)\n        } catch (error) {\n            console.error(\"Error deleting post:\", error)\n        }\n    }\n    \n    useEffect(() => {\n        fetchPosts()\n    }, [updater])\n\n    const handleSend = async (id) => {\n        const postData = {\n            userId: user._id,\n            content: input\n        }\n        \n        try {\n            await axios.put('/api/posts/'+id, postData)\n            setInput('')\n            setUpdater(state => state + 1)\n            setEditId(null)\n        } catch (error) {\n            console.error(\"Error updating post:\", error)\n        }\n    }\n\n    return (\n        <div className=\"posts__container\">\n            {\n                posts&&\n                posts.map(post=>(\n                    <div className=\"post\" key={post.postId}>\n                        <div className=\"post__details\">\n                            <img className=\"avatar\" src=\"https://cdn.vox-cdn.com/thumbor/JgCPp2BBxETY596wCp50ccosCfE=/0x0:2370x1574/1200x800/filters:focal(996x598:1374x976)/cdn.vox-cdn.com/uploads/chorus_image/image/68870438/Screen_Shot_2020_07_21_at_9.38.25_AM.0.png\" alt=\"\" />\n                            <div>\n                                <h3>{post.user}</h3>\n                                <p>{post.content}</p>\n                            </div>\n                        </div>\n                        {\n                            post.userId == user._id &&\n                            <div className=\"btns\">\n                                {\n                                    editId !== post.postId ?\n                                    <>\n                                        <button \n                                        onClick={()=>{\n                                            setEditId(post.postId)\n                                            setInput(post.content)\n                                        }} className=\"btn-edit\">Edit</button>\n                                        <button \n                                        onClick={()=>handleDelete(post.postId)}\n                                        className=\"btn-delete\">Delete</button>\n                                    </>\n                                    :\n                                    <>\n                                    <input \n                                        type=\"text\" \n                                        placeholder=\"edited message\"\n                                        value={input}\n                                        onChange={(e)=>setInput(e.target.value)}\n                                     />\n                                     <button onClick={()=>handleSend(post.postId)} className=\"btn-edit\">Send</button>\n                                     <button \n                                        onClick={()=>setEditId(null)}\n                                        className=\"btn-delete\">Cancel</button>\n                                     </>\n                                }\n                                \n                            </div>\n                        }\n                    </div>\n                ))\n            }\n        </div>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}