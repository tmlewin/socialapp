{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Tech Guru\\\\Desktop\\\\Javascript\\\\social\\\\frontend\\\\src\\\\components\\\\Posts.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useContext } from 'react';\nimport axios from '../axios';\nimport { updateContext } from '../context/updateContext';\nimport './css/Posts.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Posts({\n  posts,\n  setPosts\n}) {\n  _s();\n\n  const [updater, setUpdater] = useContext(updateContext);\n  const [editId, setEditId] = useState(null);\n  const [editContent, setEditContent] = useState('');\n  const user = JSON.parse(localStorage.getItem('user')) || {\n    _id: '123',\n    username: 'tannerkc'\n  };\n\n  const handleDelete = async id => {\n    try {\n      await axios.post('/api/posts/delete', {\n        id\n      });\n      setPosts(prevPosts => prevPosts.filter(post => post._id !== id));\n      setUpdater(state => state + 1);\n    } catch (error) {\n      console.error(\"Error deleting post:\", error);\n    }\n  };\n\n  const handleEdit = async id => {\n    try {\n      await axios.put(`/api/posts/${id}`, {\n        content: editContent,\n        userId: user._id\n      });\n      setPosts(prevPosts => prevPosts.map(post => post._id === id ? { ...post,\n        content: editContent\n      } : post));\n      setEditId(null);\n      setEditContent('');\n      setUpdater(state => state + 1);\n    } catch (error) {\n      console.error(\"Error updating post:\", error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"posts__container\",\n    children: posts && posts.map(post => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post__details\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"avatar\",\n          src: post.user.profilePicture || \"https://cdn.vox-cdn.com/thumbor/JgCPp2BBxETY596wCp50ccosCfE=/0x0:2370x1574/1200x800/filters:focal(996x598:1374x976)/cdn.vox-cdn.com/uploads/chorus_image/image/68870438/Screen_Shot_2020_07_21_at_9.38.25_AM.0.png\",\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: post.user\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 29\n          }, this), editId === post._id ? /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: editContent,\n            onChange: e => setEditContent(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 33\n          }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: post.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 21\n      }, this), post.userId === user._id && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"post__buttons\",\n        children: editId === post._id ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleEdit(post._id),\n            className: \"btn-save\",\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setEditId(null),\n            className: \"btn-cancel\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => {\n              setEditId(post._id);\n              setEditContent(post.content);\n            },\n            className: \"btn-edit\",\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleDelete(post._id),\n            className: \"btn-delete\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 25\n      }, this)]\n    }, post._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 17\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Posts, \"9xjTnh/qfe+7+5Vh5TdzMG4I4EA=\");\n\n_c = Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"sources":["C:/Users/Tech Guru/Desktop/Javascript/social/frontend/src/components/Posts.jsx"],"names":["React","useState","useContext","axios","updateContext","Posts","posts","setPosts","updater","setUpdater","editId","setEditId","editContent","setEditContent","user","JSON","parse","localStorage","getItem","_id","username","handleDelete","id","post","prevPosts","filter","state","error","console","handleEdit","put","content","userId","map","profilePicture","e","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\nimport axios from '../axios';\nimport { updateContext } from '../context/updateContext';\nimport './css/Posts.css';\n\nexport default function Posts({ posts, setPosts }) {\n    const [updater, setUpdater] = useContext(updateContext);\n    const [editId, setEditId] = useState(null);\n    const [editContent, setEditContent] = useState('');\n    const user = JSON.parse(localStorage.getItem('user')) || { _id: '123', username: 'tannerkc' };\n\n    const handleDelete = async (id) => {\n        try {\n            await axios.post('/api/posts/delete', { id });\n            setPosts(prevPosts => prevPosts.filter(post => post._id !== id));\n            setUpdater(state => state + 1);\n        } catch (error) {\n            console.error(\"Error deleting post:\", error);\n        }\n    };\n\n    const handleEdit = async (id) => {\n        try {\n            await axios.put(`/api/posts/${id}`, { content: editContent, userId: user._id });\n            setPosts(prevPosts => prevPosts.map(post => \n                post._id === id ? { ...post, content: editContent } : post\n            ));\n            setEditId(null);\n            setEditContent('');\n            setUpdater(state => state + 1);\n        } catch (error) {\n            console.error(\"Error updating post:\", error);\n        }\n    };\n\n    return (\n        <div className=\"posts__container\">\n            {posts && posts.map(post => (\n                <div className=\"post\" key={post._id}>\n                    <div className=\"post__details\">\n                        <img className=\"avatar\" src={post.user.profilePicture || \"https://cdn.vox-cdn.com/thumbor/JgCPp2BBxETY596wCp50ccosCfE=/0x0:2370x1574/1200x800/filters:focal(996x598:1374x976)/cdn.vox-cdn.com/uploads/chorus_image/image/68870438/Screen_Shot_2020_07_21_at_9.38.25_AM.0.png\"} alt=\"\" />\n                        <div>\n                            <h3>{post.user}</h3>\n                            {editId === post._id ? (\n                                <input \n                                    type=\"text\" \n                                    value={editContent} \n                                    onChange={(e) => setEditContent(e.target.value)}\n                                />\n                            ) : (\n                                <p>{post.content}</p>\n                            )}\n                        </div>\n                    </div>\n                    {post.userId === user._id && (\n                        <div className=\"post__buttons\">\n                            {editId === post._id ? (\n                                <>\n                                    <button onClick={() => handleEdit(post._id)} className=\"btn-save\">Save</button>\n                                    <button onClick={() => setEditId(null)} className=\"btn-cancel\">Cancel</button>\n                                </>\n                            ) : (\n                                <>\n                                    <button onClick={() => {\n                                        setEditId(post._id);\n                                        setEditContent(post.content);\n                                    }} className=\"btn-edit\">Edit</button>\n                                    <button onClick={() => handleDelete(post._id)} className=\"btn-delete\">Delete</button>\n                                </>\n                            )}\n                        </div>\n                    )}\n                </div>\n            ))}\n        </div>\n    );\n}\n"]},"metadata":{},"sourceType":"module"}